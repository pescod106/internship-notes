### 乐观锁

假设认为数据一般情况下不会造成冲突,所以在进行数据库更新的时候,才会正式对数据的冲突与否进行检测,如果冲突了,则返回用户错误的消息,让用户决定如何去做

乐观锁的两种方式:

1. 使用数据库版本记录机制实现,数据版本即为数据增加一个版本表示,一般是通过为数据库表增加一个数据类型的version字段来实现,当读取数据时,将version字段值一同读出,数据美更新一次看,对此version值加一,当我们提交更新的时候,判断数据库表对应的记录的当前版本信息与第一次取出来的version值进行对比,如果数据库当前版本号与第一次的version值相同,则予以更新,否则认为是过期数据
2. 第二种乐观锁的实现机制与第一种差不多,同样在需要乐观锁控制的table中增加一个字段,名称无所谓,字段类型使用时间戳,和上面的version类似,也在更新提交的时候检查当前数据库的时间戳与自己更新前渠道的时间戳进行对比,如果一致则OK,否则就是版本冲突





